<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1">
    <title>Join Quiz - Library Quiz Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="player.css">
</head>
<body>
    <div class="container">
        <!-- Join Screen -->
        <div id="joinScreen" class="screen active">
            <div class="logo-section">
                <div class="logo">üìö</div>
                <h1>LIBRARY QUIZ</h1>
            </div>
            
            <form id="joinForm" class="join-form">
                <div class="input-group">
                    <label for="roomCode">ROOM CODE</label>
                    <input 
                        type="text" 
                        id="roomCode" 
                        placeholder="ABCD" 
                        maxlength="4" 
                        autocomplete="off"
                        autocapitalize="characters"
                        required
                    >
                </div>
                
                <div class="input-group">
                    <label for="playerName">YOUR NAME</label>
                    <input 
                        type="text" 
                        id="playerName" 
                        placeholder="Enter your name" 
                        maxlength="20"
                        autocomplete="off"
                        required
                    >
                </div>
                
                <button type="submit" class="join-btn">
                    JOIN GAME
                </button>
                
                <p class="error-msg" id="errorMsg"></p>
            </form>
        </div>

        <!-- Lobby Screen -->
        <div id="lobbyScreen" class="screen">
            <div class="lobby-header">
                <span class="room-label">ROOM</span>
                <span class="room-code" id="lobbyRoomCode">ABCD</span>
            </div>
            
            <div class="player-info">
                <div class="player-avatar" id="playerAvatar">üòé</div>
                <h2 id="playerNameDisplay">Player</h2>
                <!-- Team badge added dynamically when assigned -->
            </div>
            
            <div class="waiting-indicator">
                <div class="dots">
                    <span></span><span></span><span></span>
                </div>
                <p>Waiting for host to start...</p>
            </div>
            
            <!-- Minigame Selection -->
            <div class="lobby-minigames">
                <h3>üéÆ Play a Minigame</h3>
                <div class="minigame-buttons">
                    <button class="minigame-option-btn" data-type="draw_freestyle">
                        üé® Free Draw
                    </button>
                    <button class="minigame-option-btn" data-type="draw_prompt">
                        ‚úèÔ∏è Draw Prompt
                    </button>
                    <button class="minigame-option-btn" data-type="microgame">
                        ‚ö° Microgame
                    </button>
                </div>
                <div class="minigame-prompt-input hidden" id="lobbyPromptInput">
                    <input type="text" id="lobbyMinigamePrompt" placeholder="Enter a prompt to draw..." maxlength="50">
                </div>
            </div>
        </div>

        <!-- Question Screen -->
        <div id="questionScreen" class="screen">
            <div class="question-header">
                <span class="q-number" id="questionNumber">1/10</span>
                <div class="timer" id="timer">
                    <div class="timer-bar" id="timerBar"></div>
                    <span id="timerText">15</span>
                </div>
            </div>
            
            <div class="question-text" id="questionText">
                What is the question?
            </div>
            
            <!-- Classic mode: answer buttons -->
            <div class="answers" id="answersContainer">
                <!-- Answer buttons generated by JS -->
            </div>
            
            <!-- Bowl mode: buzz and answer UI -->
            <div class="bowl-player-ui hidden" id="bowlPlayerUI">
                <!-- Buzz button -->
                <div class="buzz-container" id="buzzContainer">
                    <button class="buzz-btn" id="buzzBtn">
                        <span class="buzz-icon">üîî</span>
                        <span class="buzz-text">BUZZ!</span>
                    </button>
                </div>
                
                <!-- Answer input (shown after winning buzz) -->
                <div class="bowl-answer-input hidden" id="bowlAnswerInput">
                    <p class="bowl-prompt">You buzzed first! Type your answer:</p>
                    <input type="text" id="bowlAnswerText" placeholder="Type your answer..." autocomplete="off" maxlength="100">
                    <button class="bowl-submit-btn" id="bowlSubmitBtn">SUBMIT</button>
                </div>
                
                <!-- Waiting state (shown when someone else buzzed) -->
                <div class="bowl-waiting-state hidden" id="bowlWaitingState">
                    <p class="bowl-wait-text" id="bowlWaitText">Waiting...</p>
                </div>
                
                <!-- Steal button (shown during steal phase) -->
                <div class="steal-container hidden" id="stealContainer">
                    <button class="steal-btn" id="stealBtn">
                        <span class="steal-icon">‚ö°</span>
                        <span class="steal-text">STEAL!</span>
                    </button>
                </div>
                
                <!-- Not eligible for steal -->
                <div class="steal-ineligible hidden" id="stealIneligible">
                    <p>Your team already attempted this question</p>
                </div>
            </div>
            
            <div class="answered-overlay" id="answeredOverlay">
                <div class="checkmark">‚úì</div>
                <p>Answer locked in!</p>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <div class="result-header" id="resultHeader">
                <!-- Dynamic: correct/incorrect -->
            </div>
            
            <div class="points-display" id="pointsDisplay">
                <!-- Dynamic: points earned -->
            </div>
            
            <div class="streak-display" id="streakDisplay">
                <!-- Dynamic: streak info -->
            </div>
            
            <div class="your-rank">
                <span class="rank-label">YOUR POSITION</span>
                <span class="rank-number" id="yourRank">#1</span>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="screen">
            <h1 class="game-over-title">GAME OVER</h1>
            
            <div class="final-score">
                <span class="score-label">YOUR SCORE</span>
                <span class="score-value" id="finalScore">0</span>
            </div>
            
            <div class="final-rank">
                <span class="rank-label">FINAL RANK</span>
                <span class="rank-value" id="finalRank">#1</span>
            </div>
            
            <button class="play-again-btn" onclick="location.reload()">
                PLAY AGAIN
            </button>
        </div>

        <!-- Kicked Screen -->
        <div id="kickedScreen" class="screen">
            <div class="kicked-icon">üö´</div>
            <h2>You've been removed</h2>
            <p>The host has removed you from the game.</p>
            <button class="play-again-btn" onclick="location.reload()">
                TRY AGAIN
            </button>
        </div>

        <!-- Minigame Screen -->
        <div id="minigameScreen" class="screen">
            <div class="minigame-header">
                <h2 id="minigameTitle">üé® MINIGAME</h2>
                <p id="minigamePrompt" class="minigame-prompt"></p>
                <div class="minigame-timer" id="minigameTimer"></div>
            </div>
            
            <div class="minigame-content">
                <!-- Drawing Canvas -->
                <div class="drawing-container" id="drawingContainer">
                    <canvas id="drawingCanvas"></canvas>
                </div>
                
                <!-- Drawing Controls -->
                <div class="drawing-controls" id="drawingControls">
                    <div class="color-picker">
                        <label>Color:</label>
                        <input type="color" id="colorPicker" value="#000000">
                    </div>
                    <div class="brush-size">
                        <label>Size:</label>
                        <input type="range" id="brushSize" min="2" max="20" value="5">
                        <span id="brushSizeValue">5</span>
                    </div>
                    <button class="clear-btn" id="clearCanvasBtn">Clear</button>
                    <button class="submit-minigame-btn" id="submitMinigameBtn">Submit</button>
                </div>
                
                <!-- Microgame UI -->
                <div class="microgame-ui" id="microgameUI" style="display: none;">
                    <!-- Content generated dynamically -->
                </div>
            </div>
        </div>
    </div>

    <script src="player.js"></script>
</body>
</html>

